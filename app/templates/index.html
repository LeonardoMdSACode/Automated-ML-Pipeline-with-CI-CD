<!DOCTYPE html>
<html>
<head>
    <title>House Price Prediction</title>
    <meta charset="utf-8">
</head>
<body>
<h2>House Price Prediction</h2>

<form id="predict-form">
    <textarea id="features" rows="18" cols="50">
{
  "bedrooms": 3,
  "bathrooms": 2,
  "sqft_living": 1800,
  "sqft_lot": 5000,
  "floors": 1,
  "waterfront": 0,
  "view": 0,
  "condition": 3,
  "grade": 7,
  "sqft_above": 1800,
  "sqft_basement": 0,
  "yr_built": 1995,
  "yr_renovated": 0,
  "zipcode": 98178,
  "lat": 47.51,
  "long": -122.25,
  "sqft_living15": 1800,
  "sqft_lot15": 5000
}
    </textarea><br><br>

    <button type="submit">Predict</button>
</form>

<h3>Result</h3>
<pre id="result"></pre>

<script>
document.getElementById("predict-form").addEventListener("submit", async function(e) {
    e.preventDefault();

    const features = JSON.parse(document.getElementById("features").value);

    const response = await fetch("/api/predict", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ features })
    });

    const data = await response.json();
    
    if (!response.ok) {
        document.getElementById("result").textContent =
            "Error: " + JSON.stringify(data, null, 2);
        return;
    }
    
    document.getElementById("result").textContent =
        "Prediction: " + data.prediction + "\nModel: " + data.model_version;
    
});
</script>
</body>
</html>
